/****************************************************************
*                     КАФЕДРА № 304 1 КУРС                      *
*---------------------------------------------------------------*
* Project Type  : GNU/Linux Console Application                 *
* Project Name  : proj_2                                        *
* File Name     : main.cpp                                      *
* Language      : C/C++                                         *
* Programmer(s) : Егоров А.В (swrneko), Федоров А.И.            *
* Modifyed By   : Егоров А.В (swrneko)                          *
* Edited by     : Neovim, Visual Studio                         *
* OS            : Arch Linux, Windows 11                        *
* Github url    : https://github.com/swrneko/mai_shit.git       *
* Created       : 13/11/24                                      *
* Last Revision : 29/11/24                                      *
* Comment(s)    : Табулирование функций.                        *
****************************************************************/

/****************************************
* Подключение препроцессора и библиотек *
****************************************/
#include <cmath>
#include <iostream>
#include <iomanip>
using namespace std;

/*************
* Переменные *
*************/
float a; // Начальная точка отрезка
float b; // Конечная точка отрезка
float h; // Величина шага
float x; // Аргумент функций
int n; // Количество интервалов
int i; // Счётчик итераций цикла
           
/****************
* Основное тело *
****************/
int main() {
  // Ввод начальной информации
  cout << "Введите точку А: ";
  cin >> a;
  cout << "Введите точку B: ";
  cin >> b;

  // Проверка условия a > b
  if (a > b){
    cout << "Значение т. A должно быть меньше значения т. B." << endl
    << "Повторите корректный ввод перезапустив программу." << endl 
    << "Досрочное завершение: Ошибка ввода." << endl;
    exit(1);
  }

  // Ввод кол-ва интервалов
  cout << "Введите количество интервалов N: ";
  cin >> n;

  // Проверка кол-ва интервалов на отрицательность
  if (n <= 0) {
    cout << "Количество интервалов(N) должно быть больше 0." << endl
    << "Повторите корректный ввод перезапустив программу." << endl
    << "Досрочное завершение: Ошибка ввода." << endl;
    exit(1);
  }
  else {
    h = ((b - a) / n); // Вычисление шага
  }

  // Вывод шапки таблицы
  cout << "╔═══════════╦═══════════╦═══════════╦═══════════╗" << endl
       << "║ N" << setw(14) << "║ X" << setw(14) << "║ F" << setw(14) << "║ G" << setw(12) << "║" << endl
       << "╠═══════════╬═══════════╬═══════════╬═══════════╣" << endl;

  // Инициальзация переменной
  i = 0; 
  // Основные вычисления
  while (i != n) {
    x = (a + (i * h)); // Приращение аргумента

    // Вывод содержания таблицы
    cout.width(0);
    cout << fixed << setprecision(5) // Установка точности в 5 знаков после запятой
         << "║ " << setw(10) 
         << left << (i + 1) 
         << "║ " << setw(10)
         << left << x 
         << "║ " << setw(10)
         << left << (2 - cos(x)) 
         << "║ " << setw(10)
         << left << (1 - (x * x)) 
         << "║" 
         << endl;

    // Проверка на a == b
    if (a == b) {
      exit(0);
    }

    // Прибавление кол-ва интервалов
    i += 1;
    if (i == n) { // Вывод нижней части таблицы
      cout << "╚═══════════╩═══════════╩═══════════╩═══════════╝" << endl;
    }
    else { // Вывод промежуточной части таблицы
      cout << "╠═══════════╬═══════════╬═══════════╬═══════════╣" << endl;
    }
  }
}
